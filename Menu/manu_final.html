<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Menu | The Nocturnal Bean</title>
    <link rel="stylesheet" href="../style.css" />
    <link rel="stylesheet" href="menu_final.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
      rel="stylesheet"
    />
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <style>
      .hamburger {
        display: none;
        flex-direction: column;
        gap: 5px;
        background: none;
        border: none;
        cursor: pointer;
        z-index: 100;
      }

      .hamburger span {
        width: 25px;
        height: 3px;
        background: var(--text-white);
        border-radius: 2px;
        transition: var(--transition);
      }

      .hamburger.active span:nth-child(1) {
        transform: rotate(45deg) translate(8px, 8px);
      }

      .hamburger.active span:nth-child(2) {
        opacity: 0;
      }

      .hamburger.active span:nth-child(3) {
        transform: rotate(-45deg) translate(7px, -7px);
      }

      .mobile-nav {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: var(--glass-bg);
        backdrop-filter: blur(12px);
        border: 1px solid var(--glass-border);
        flex-direction: column;
        width: 100vw;
        z-index: 99;
      }

      .mobile-nav.active {
        display: flex;
      }

      .mobile-nav ul {
        display: flex;
        flex-direction: column;
        list-style: none;
        gap: 0;
        padding: 0;
      }

      .mobile-nav li {
        border-bottom: 1px solid var(--glass-border);
      }

      .mobile-nav a {
        display: block;
        padding: 16px 20px;
        text-decoration: none;
        color: var(--text-muted);
        font-weight: 500;
        transition: var(--transition);
      }

      .mobile-nav a:hover {
        color: var(--primary);
        background: rgba(244, 140, 37, 0.1);
      }

      @media (max-width: 768px) {
        nav {
          display: none;
        }

        .hamburger {
          display: flex;
        }

        .nav-wrapper {
          gap: 10px;
        }
      }
    </style>
  </head>
  <body>
    <div class="bg-glow-container">
      <div class="orb orb-primary"></div>
      <div class="orb orb-amber"></div>
    </div>

    <div id="custom-prompt-overlay" class="prompt-overlay">
      <div class="prompt-card glass">
        <div class="prompt-icon">
          <span class="material-symbols-outlined">person_pin</span>
        </div>
        <h2>Welcome!</h2>
        <p>
          Please enter your name to personalize your experience at
          <span
            id="prompt-table-display"
            style="color: var(--primary); font-weight: 800"
          ></span
          >.
        </p>

        <div class="input-group">
          <input
            type="text"
            id="custom-name-input"
            placeholder="Your Name..."
            autocomplete="off"
          />
        </div>

        <button id="confirm-name-btn" class="btn-primary" style="width: 100%">
          Start Dining
        </button>
      </div>
    </div>

    <div style="position: relative; z-index: 10">
      <header class="glass">
        <div class="container nav-wrapper">
          <a
            href="../index.html"
            class="logo"
            style="
              text-decoration: none;
              color: inherit;
              display: flex;
              align-items: center;
              gap: 12px;
            "
          >
            <span class="material-symbols-outlined">all_inclusive</span>
            <h2>QuickBite</h2>
          </a>
          <nav>
            <ul>
              <li><a href="../index.html">Home</a></li>
              <li><a href="../Menu/manu_final.html" class="active">Menu</a></li>
              <li><a href="../My_Orders/my_orders.html">My Orders</a></li>
            </ul>
          </nav>
          <div class="nav-actions" id="nav-actions">
            <button class="btn-order">Order Now</button>
            <div id="nav-profile-slot"></div>
          </div>
          <button class="hamburger" onclick="toggleMenu()">
            <span></span>
            <span></span>
            <span></span>
          </button>
        </div>
      </header>

      <nav id="mobile-nav" class="mobile-nav">
        <ul>
          <li><a href="../index.html">Home</a></li>
          <li><a href="../Menu/manu_final.html" class="active">Menu</a></li>
          <li><a href="../My_Orders/my_orders.html">My Orders</a></li>
        </ul>
        <button class="btn-order" style="margin: 12px 20px; width: calc(100% - 40px)">Order Now</button>
      </nav>

      <main class="container">
        <section class="menu-hero">
          <h1>
            Fuel Your <span class="gradient-text">Late-Night Sessions</span>
          </h1>
          <p>Serving the brightest minds during the darkest hours.</p>

          <div class="search-container glass">
            <span class="material-symbols-outlined">search</span>
            <input
              type="text"
              id="search-input"
              placeholder="Search for coffee, burgers, or snacks..."
            />
          </div>
        </section>

        <div class="section-title">
          <h2>Browse Categories</h2>
        </div>

        <div class="category-grid" id="category-grid">
          <!-- Categories will be loaded from array -->
        </div>
      </main>

      <footer>
        <div class="container">
          <div class="footer-grid">
            <div class="footer-brand">
              <div class="logo">
                <span class="material-symbols-outlined">all_inclusive</span>
                <h2 style="font-size: 1.2rem; font-weight: 800">QuickBite</h2>
              </div>
              <p>
                Dedicated to the night owls, the morning birds, and everyone in
                between. We are your 24/7 sanctuary for productivity.
              </p>
              <div class="social-links">
                <a href="#" class="social-icon"
                  ><span
                    class="material-symbols-outlined"
                    style="font-size: 18px"
                    >public</span
                  ></a
                >
                <a href="#" class="social-icon"
                  ><span
                    class="material-symbols-outlined"
                    style="font-size: 18px"
                    >share</span
                  ></a
                >
                <a href="#" class="social-icon"
                  ><span
                    class="material-symbols-outlined"
                    style="font-size: 18px"
                    >mail</span
                  ></a
                >
              </div>
            </div>

            <div>
              <h4 class="footer-heading">Quick Links</h4>
              <ul class="footer-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="Menu/menu.html">Menu</a></li>
                <li><a href="My_Orders/my_orders.html">My Orders</a></li>
              </ul>
            </div>

            <div>
              <h4 class="footer-heading">Visit Us</h4>
              <ul class="contact-info">
                <li>
                  <span class="material-symbols-outlined">location_on</span>
                  <span
                    >123 University Ave,<br />Campus District, NY 10012</span
                  >
                </li>
                <li>
                  <span class="material-symbols-outlined">schedule</span>
                  <span
                    >Open 24 Hours / 7 Days a Week<br />Fresh Coffee Every
                    Hour</span
                  >
                </li>
              </ul>
            </div>
          </div>

          <div class="footer-bottom">
            <p>Â© 2026 QuickBite. All rights reserved.</p>
            <div class="legal-links">
              <a href="#">Privacy Policy</a>
              <a href="#">Terms of Service</a>
            </div>
          </div>
        </div>
      </footer>
    </div>

    <div class="mobile-cart glass">
      <div class="cart-info">
        <span class="material-symbols-outlined text-primary">shopping_bag</span>
        <span class="font-bold">0 Items</span>
      </div>
      <div class="divider"></div>
      <div class="cart-total">
        <span class="text-muted">Total: <b>Rs. 0</b></span>
        <button class="btn-checkout" onclick="sendOrderToKitchen()">
          Checkout
        </button>
      </div>
    </div>

    <script src="../script.js"></script>
    <script src="menu_final.js"></script>
    <script>
      // Categories Data Array
      const categoriesData = [
        {
          name: 'Main Course',
          description: 'Hearty meals to keep you going through any all-nighter.',
          icon: 'lunch_dining',
          link: '../Main_Course/main_course.html',
          image: 'https://images.unsplash.com/photo-1568901346375-23c9450c58cd?q=80&w=1000',
          badge: null
        },
        {
          name: 'Drinks',
          description: 'High-caffeine kicks and refreshing chilled sips for clarity.',
          icon: 'local_cafe',
          link: '../Drinks/drinks.html',
          image: 'https://images.unsplash.com/photo-1541167760496-1628856ab772?q=80&w=1000',
          badge: null
        },
        {
          name: 'Seasonal Offers',
          description: 'Limited-time student specials for exam seasons.',
          icon: 'auto_awesome',
          link: '../Offers/offers.html',
          image: 'https://images.unsplash.com/photo-1509440159596-0249088772ff?q=80&w=1000',
          badge: 'Limited'
        },
        {
          name: 'Appetizers',
          description: 'Tasty bites and starters to kick off your cravings.',
          icon: 'restaurant',
          link: '../Apperizers/appetizers.html',
          image: 'https://images.unsplash.com/photo-1513456852971-30c0b8199d4d?q=80&w=1000',
          badge: null
        },
        {
          name: 'Desserts',
          description: 'Sweet treats to satisfy your midnight cravings.',
          icon: 'cake',
          link: '../Deserts/deserts.html',
          image: 'https://images.unsplash.com/photo-1578985545062-69928b1d9587?q=80&w=1000',
          badge: null
        }
      ];

      // Load categories from array
      function loadCategories(categoriesToDisplay = categoriesData) {
        const categoryGrid = document.getElementById('category-grid');
        categoryGrid.innerHTML = '';

        categoriesToDisplay.forEach(category => {
          const categoryCard = document.createElement('div');
          categoryCard.className = 'category-card glass';
          categoryCard.onclick = () => location.href = category.link;

          let badgeHTML = '';
          if (category.badge) {
            badgeHTML = `<span class="badge-limited">${category.badge}</span>`;
          }

          categoryCard.innerHTML = `
            <div class="cat-img" style="background-image: url(&quot;${category.image}&quot;);">
              ${badgeHTML}
            </div>
            <div class="cat-info">
              <div class="cat-header">
                <span class="material-symbols-outlined">${category.icon}</span>
                <h3>${category.name}</h3>
              </div>
              <p>${category.description}</p>
            </div>
          `;

          categoryGrid.appendChild(categoryCard);
        });
      }

      // Search functionality
      function searchCategories(query) {
        const searchTerm = query.toLowerCase().trim();
        if (searchTerm === '') {
          loadCategories(categoriesData);
        } else {
          const filteredCategories = categoriesData.filter(category =>
            category.name.toLowerCase().includes(searchTerm) ||
            category.description.toLowerCase().includes(searchTerm)
          );
          loadCategories(filteredCategories);
        }
      }

      // Initialize
      document.addEventListener('DOMContentLoaded', () => {
        loadCategories();

        // Add search event listener
        const searchInput = document.getElementById('search-input');
        if (searchInput) {
          searchInput.addEventListener('input', (e) => {
            searchCategories(e.target.value);
          });
        }

        initializeQuickBite();
        updateMobileCartUI();
      });
    </script>
  </body>
</html>
